# HardyBot v10 ‚Äî Telegram IT Helpdesk Bot (Aiogram 3)

–ì–æ—Ç–æ–≤—ã–π Telegram‚Äë–±–æ—Ç –¥–ª—è IT‚Äë—Å–ª—É–∂–±—ã: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø–∞—Ä–æ–ª–µ–º, –ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å (–§–ò–û + SIP), –ø–æ–¥–∞—á–∞ –∑–∞—è–≤–æ–∫ —Å –º–µ–¥–∏–∞,
—É–º–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º/–∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏, –ø–∞–Ω–µ–ª–∏ –¥–ª—è **–∞–¥–º–∏–Ω–∞** –∏ **—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è**, –∏—Å—Ç–æ—Ä–∏—è –∏ —Å—Ç–∞—Ç—É—Å—ã.

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∑–∞—Ö–æ–¥—è—Ç –ø–æ –æ–±—â–µ–π `PASS_PHRASE`, –ø–µ—Ä—Å–æ–Ω–∞–ª (–æ–±–∞ –∞–¥–º–∏–Ω–∞ + –±–æ—Å—Å) ‚Äî –±–µ–∑ –ø–∞—Ä–æ–ª—è –ø–æ —Å–≤–æ–∏–º Telegram‚ÄëID.
- **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –§–ò–û –∏ –∫–æ—Ä–æ—Ç–∫–∏–π SIP‚Äë–¥–æ–±. (`sip_ext`), –ø—Ä–∏–∑–Ω–∞–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—è `profile_completed`.
- **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞**: —Ç–µ–∫—Å—Ç + **—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ/–¥–æ–∫—É–º–µ–Ω—Ç—ã/–≥–æ–ª–æ—Å–æ–≤—ã–µ**; –º–µ–¥–∏–∞ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –∑–∞—è–≤–∫—É, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ `Attachment`.
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `app/keyboards.py ‚Üí USER_CATEGORIES`).
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É**: –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ (`app/services/assignment.py`). –û—Ç–∫—Ä—ã—Ç—ã–µ —Å—Ç–∞—Ç—É—Å—ã —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è.
- **–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞**: –ø—Ä–∏–Ω—è—Ç–∏–µ/–ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è/—Å—Ç–∞—Ç—É—Å—ã, –∑–∞–ø—Ä–æ—Å –æ—Ç—á—ë—Ç–∞, —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞.
- **–ü–∞–Ω–µ–ª—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è**: –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏, —Å–≤–æ–¥–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã –±–µ–∑ ¬´—Å–ø–∞–º–∞¬ª –≤ —á–∞—Ç (—è–∫–æ—Ä–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è).
- **–ò—Å—Ç–æ—Ä–∏—è –∑–∞—è–≤–æ–∫** –∏ **—Ä–µ–π—Ç–∏–Ω–≥–∏** –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ—Ç 1 –¥–æ 10).
- **–ê–Ω—Ç–∏—Å–ø–∞–º** middleware –∏ **–Ω–∞–¥—ë–∂–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏** –≤ Telegram —Å —Ä–µ—Ç—Ä–∞—è–º–∏ –∏ backoff‚Äô–æ–º (`app/telegram_safe.py`).
- **SQLite** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø—Ä–æ—Å—Ç—ã–µ ¬´–ª–µ–Ω–∏–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏¬ª –∫–æ–ª–æ–Ω–æ–∫ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (–±–µ–∑ Alembic –≤ —ç—Ç–æ–π —Å–±–æ—Ä–∫–µ).

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
HardyBot/
‚îú‚îÄ app/
‚îÇ  ‚îú‚îÄ bot.py                 # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞: —Å–±–æ—Ä–∫–∞ DP/Router, middlewares, –∫–æ–º–∞–Ω–¥—ã, —Å—Ç–∞—Ä—Ç polling
‚îÇ  ‚îú‚îÄ config.py              # .env ‚Üí Settings (TOKEN, DB_URL, —Ä–æ–ª–∏ –∏ —Ç.–ø.)
‚îÇ  ‚îú‚îÄ db.py                  # SQLAlchemy engine/Session/Base (async + aiosqlite)
‚îÇ  ‚îú‚îÄ enums.py               # Role, Status, Priority
‚îÇ  ‚îú‚îÄ error_handlers.py      # –µ–¥–∏–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ—à–∏–±–æ–∫ Telegram API
‚îÇ  ‚îú‚îÄ keyboards.py           # inline‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–æ—Ü–µ–Ω–∫–∏ –∏ —Ç.–¥.
‚îÇ  ‚îú‚îÄ models.py              # User, Task, Attachment (ORM‚Äë–º–æ–¥–µ–ª–∏ –∏ —Å–≤—è–∑–∏)
‚îÇ  ‚îú‚îÄ states.py              # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/—Ç–∏–∫–µ—Ç/–æ—Ç—á—ë—Ç—ã)
‚îÇ  ‚îú‚îÄ telegram_safe.py       # –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Å —Ä–µ—Ç—Ä–∞—è–º–∏/–¥–∂–∏—Ç—Ç–µ—Ä–æ–º, bulk‚Äëdelete
‚îÇ  ‚îú‚îÄ handlers/
‚îÇ  ‚îÇ  ‚îú‚îÄ common.py           # /start, /help, –ø—Ä–æ—Ñ–∏–ª—å, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ  ‚îÇ  ‚îú‚îÄ user.py             # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏: –Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞, –∏—Å—Ç–æ—Ä–∏—è, –æ—Ü–µ–Ω–∫–∞
‚îÇ  ‚îÇ  ‚îú‚îÄ admin.py            # –∞–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –æ—Ç—á—ë—Ç—ã, —Å—Ç–∞—Ç—É—Å—ã
‚îÇ  ‚îÇ  ‚îî‚îÄ boss.py             # –ø–∞–Ω–µ–ª—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è: —Å–≤–æ–¥–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏, –∞–Ω–∫–æ—Ä—ã –º–µ–¥–∏–∞
‚îÇ  ‚îú‚îÄ middlewares/
‚îÇ  ‚îÇ  ‚îú‚îÄ auth.py             # RequireAuth/RequireProfile: –¥–æ—Å—Ç—É–ø –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ  ‚îÇ  ‚îú‚îÄ db_session.py       # –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç AsyncSession –≤ —Ö—ç–Ω–¥–ª–µ—Ä—ã
‚îÇ  ‚îÇ  ‚îî‚îÄ antispam.py         # –ø—Ä–æ—Å—Ç–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—É–¥‚Äë–∫–ª–∏–∫–æ–≤
‚îÇ  ‚îú‚îÄ services/
‚îÇ  ‚îÇ  ‚îú‚îÄ assignment.py       # –ª–æ–≥–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∞–¥–º–∏–Ω–∞, –æ—Ç–∫—Ä—ã—Ç—ã–µ —Å—Ç–∞—Ç—É—Å—ã, –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ  ‚îÇ  ‚îî‚îÄ notify.py           # —É—Ç–∏–ª–∏—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π/—á–∏—Å—Ç–∫–∏
‚îÇ  ‚îî‚îÄ utils/
‚îÇ     ‚îî‚îÄ media.py            # —Å–±–æ—Ä —á–µ—Ä–Ω–æ–≤–∏–∫–∞ –º–µ–¥–∏–∞, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞, –æ—á–∏—Å—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ requirements.txt
‚îú‚îÄ Dockerfile
‚îú‚îÄ .env.example
‚îî‚îÄ bot.db                    # SQLite —Ñ–∞–π–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (–ª–æ–∫–∞–ª—å–Ω–æ)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å **Python 3.11+**.
2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ —Å–æ–∑–¥–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   ```bash
   cd HardyBot
   python -m venv .venv
   . .venv/bin/activate    # Windows: .venv\Scripts\activate
   pip install -r requirements.txt
   ```
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `.env.example` ‚Üí `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:
   ```env
   BOT_TOKEN=123456:ABC...
   PASS_PHRASE=—Å–µ–∫—Ä–µ—Ç–Ω–∞—è_—Ñ—Ä–∞–∑–∞  # –æ–±—â–∏–π –ø–∞—Ä–æ–ª—å –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
   DB_URL=sqlite+aiosqlite:///./bot.db

   # Telegram IDs
   ADMIN_ARTUR_ID=111111111
   ADMIN_ANDREY_K_ID=222222222
   BOSS_ANDREY_T_ID=333333333
   ```
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:
   ```bash
   python -m app.bot
   ```

### üê≥ –ó–∞–ø—É—Å–∫ –≤ Docker

```bash
docker build -t hardybot:latest .
docker run --rm -it --name hardybot   --env-file .env   -v "$(pwd)/bot.db:/app/bot.db"   hardybot:latest
```

---

## üß© –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ ¬´–ª–µ–Ω–∏–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏¬ª

- ORM: **SQLAlchemy 2.x** (async) + **aiosqlite**.
- –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (`app.bot:on_startup ‚Üí Base.metadata.create_all`).
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è ¬´–º—è–≥–∫–æ¬ª –≤ `_apply_simple_migrations()` —á–µ—Ä–µ–∑ `ALTER TABLE ...` –≤ try/except:
  - `users.sip_ext`, `users.profile_completed`
  - `tasks.author_full_name`, `tasks.author_sip`
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Alembic; –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –æ–Ω –Ω–µ –≤–∫–ª—é—á—ë–Ω.

---

## üë• –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

- **STAFF** (–æ–±–∞ –∞–¥–º–∏–Ω–∞ + –±–æ—Å—Å) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ ID –∏–∑ `.env` ‚Üí `settings.staff_ids`.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ —Ä–æ–ª–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é (**/start**) –ø–æ `PASS_PHRASE` ‚Üí –∑–∞–ø–æ–ª–Ω—è—é—Ç –ø—Ä–æ—Ñ–∏–ª—å (–§–ò–û, SIP).
- –î–∞–ª—å—à–µ –¥–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è middleware `auth.py`:
  - –≥–æ—Å—Ç—é –æ—Ç–∫—Ä—ã—Ç —Ç–æ–ª—å–∫–æ `/start`, `/help` –∏ –ø–∞–Ω–µ–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞;
  - –ø—Ä–æ—á–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è.

---

## üéõ –ü–æ—Ç–æ–∫–∏ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (`USER_CATEGORIES`) ‚Üí –≤–≤–æ–¥ –æ–ø–∏—Å–∞–Ω–∏—è ‚Üí –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.
- –¢–∏–∫–µ—Ç —É—Ö–æ–¥–∏—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–º—É –∞–¥–º–∏–Ω—É; –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å—Ç–∞—Ç—É—Å –∏ –º–æ–∂–µ—Ç –ø–æ—Å—Ç–∞–≤–∏—Ç—å **–æ—Ü–µ–Ω–∫—É** –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏.

**–ê–¥–º–∏–Ω:**
- –í–∏–¥–∏—Ç –Ω–æ–≤—ã–µ/–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏, –º–æ–∂–µ—Ç **–ø—Ä–∏–Ω—è—Ç—å**, **–ø–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤–∞—Ç—å**, –∑–∞–¥–∞–≤–∞—Ç—å **–≤–æ–ø—Ä–æ—Å—ã**, —Å—Ç–∞–≤–∏—Ç—å **–æ–∂–∏–¥–∞–Ω–∏–µ**, **–∑–∞–∫—Ä—ã–≤–∞—Ç—å**.
- –ú–æ–∂–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å **–æ—Ç—á—ë—Ç** –∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Å –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –æ—Ü–µ–Ω–∫–∏/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.

**–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å:**
- –ü–æ–ª—É—á–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∞–Ω–∫–æ—Ä–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å —á–∞—Ç.
- –ú–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–¥–∫—É –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

---

## üß∞ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **Antispam**: –æ—Ç—Å–µ–∫–∞–µ—Ç —á–∞—Å—Ç—ã–µ –∫–ª–∏–∫–∏/–¥—É–±–ª–∏–∫–∞—Ç—ã callback‚Äô–æ–≤.
- **Safe Telegram API** (`telegram_safe.py`): —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ä–µ—Ç—Ä–∞–∏ —Å backoff –∏ jitter, `safe_bulk_delete` –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π —á–∏—Å—Ç–∫–∏.
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –º–µ–¥–∏–∞**: `utils/media.py` —Ö—Ä–∞–Ω–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π ¬´—á–µ—Ä–Ω–æ–≤–∏–∫¬ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –±–æ—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∑–∞—Ç–µ–º –æ—á–∏—â–∞–µ—Ç –∏—Ö, —á—Ç–æ–±—ã –≤ —á–∞—Ç–µ –Ω–µ –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –¥—É–±–ª—ë—Ä—ã.
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞**: `services/assignment.py` —É—á–∏—Ç—ã–≤–∞–µ—Ç ¬´–æ—Ç–∫—Ä—ã—Ç—ã–µ¬ª —Å—Ç–∞—Ç—É—Å—ã (`NEW/ACCEPTED/IN_PROGRESS/WAITING/REOPENED`) –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É.

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ç–æ—á–∫–∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏

- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —ç–º–æ–¥–∑–∏: `app/keyboards.py ‚Üí USER_CATEGORIES` (—Ç—Ä–µ–∫–∏—Ä—É–µ–º—ã–π –∫–æ–¥/–∫–ª—é—á –¥–ª—è callback).
- –¢–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫/–º–µ–Ω—é: `keyboards.py`.
- –ü–æ–ª–∏—Ç–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è: `services/assignment.py`.
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∞–≤ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: `middlewares/auth.py`, `handlers/common.py`.
- –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞: `app.bot:on_startup ‚Üí set_my_commands()`.

---

## üß™ –õ–∏–Ω—Ç–∏–Ω–≥/—Ç–µ—Å—Ç—ã

–í –∞—Ä—Ö–∏–≤–µ –Ω–µ—Ç CI –∏ —Ç–µ—Å—Ç–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è:
- Ruff/Black/Isort –¥–ª—è —Å—Ç–∏–ª—è.
- Pytest + pytest‚Äëasyncio –¥–ª—è —é–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç–æ–≤ –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∏ (`assignment`, `media`).
- Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –ë–î.

---

## üêû –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã/–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –í —Å–±–æ—Ä–∫–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–∞–ø–∫–∞ `.venv/` –≤–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–∞ ‚Äî –¥–ª—è –¥–µ–ø–ª–æ–π‚Äë–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –µ—ë **–Ω—É–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å**.
- –ú–∏–≥—Ä–∞—Ü–∏–∏ ‚Äî ¬´–ª–µ–Ω–∏–≤—ã–µ¬ª, –Ω–µ –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Å–ª–æ–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã.
- SQLite –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞; –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –ª—É—á—à–µ Postgres + Alembic.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫‚Äë–ª–∏—Å—Ç –ø—Ä–æ–¥–∞–∫—à–Ω‚Äë—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –ó–∞–¥–∞—Ç—å **—É–Ω–∏–∫–∞–ª—å–Ω—É—é** `PASS_PHRASE` –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ Telegram‚ÄëID –ø–µ—Ä—Å–æ–Ω–∞–ª–∞.
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ë–î –Ω–∞ **PostgreSQL** (`DB_URL=postgresql+asyncpg://...`). 
- [ ] –î–æ–±–∞–≤–∏—Ç—å Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ CI (–ª–∏–Ω—Ç/—Ç–µ—Å—Ç—ã).
- [ ] –û–±–µ—Ä–Ω—É—Ç—å –≤ systemd/Docker Compose, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å healthcheck –∏ –ª–æ–≥–∏.
- [ ] –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –∏ –±—ç–∫–∞–ø –ë–î.

---

‚Äî HardyBot v10 (stable)
